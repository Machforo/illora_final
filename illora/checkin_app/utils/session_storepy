# app/utils/session_store.py
import os, json
import redis

REDIS_URL = os.getenv("REDIS_URL", "redis://localhost:6379/0")
r = redis.Redis.from_url(REDIS_URL, decode_responses=True)

def get_session(key):
    raw = r.get(key)
    return json.loads(raw) if raw else None

def set_session(key, obj, ex=3600):
    r.set(key, json.dumps(obj), ex=ex)

def clear_session(key):
    r.delete(key)
